{"version":3,"sources":["../source/locale.test.js"],"names":["choose_locale","intlDateTimeFormatSupportedLocale","describe","it","should","equal","array_to_object","array","reduce","object","locale","choose","locales","default_locale","concat","thrower","throw"],"mappings":"AAAA,OAAOA,aAAP,IAAwBC,iCAAxB,QAAiE,kBAAjE;;AAEAC,SAAS,QAAT,EAAmB,YACnB;AACCC,uDAAsD,YACtD;AACCF,oCAAkC,IAAlC,EAAwCG,MAAxC,CAA+CC,KAA/C,CAAqD,IAArD;AACAJ,oCAAkC,OAAlC,EAA2CG,MAA3C,CAAkDC,KAAlD,CAAwD,OAAxD;AACAJ,oCAAkC,CAAC,IAAD,EAAO,IAAP,CAAlC,EAAgDG,MAAhD,CAAuDC,KAAvD,CAA6D,IAA7D;AACA,EALD;;AAOAF,iDAAgD,YAChD;AACC,WAASG,eAAT,CAAyBC,KAAzB,EACA;AACC,UAAOA,MAAMC,MAAN,CAAa,UAACC,MAAD,EAASC,MAAT,EACpB;AACCD,WAAOC,MAAP,IAAiB,IAAjB;AACA,WAAOD,MAAP;AACA,IAJM,EAKP,EALO,CAAP;AAMA;;AAED,WAASE,MAAT,CAAgBD,MAAhB,EAAwBE,OAAxB,EACA;AAAA,OADiCC,cACjC,uEADkD,IAClD;;AACC,OAAI,OAAOH,MAAP,KAAkB,QAAtB,EACA;AACCA,aAAS,CAACA,MAAD,CAAT;AACA;;AAEDA,YAASA,OAAOI,MAAP,CAAcD,cAAd,CAAT;;AAEA,UAAOb,cAAcU,MAAd,EAAsBJ,gBAAgBM,OAAhB,CAAtB,CAAP;AACA;;AAEDD,SAAO,OAAP,EAAgB,CAAC,IAAD,EAAO,IAAP,CAAhB,EAA8BP,MAA9B,CAAqCC,KAArC,CAA2C,IAA3C;AACAM,SAAO,OAAP,EAAgB,CAAC,IAAD,EAAO,IAAP,CAAhB,EAA8BP,MAA9B,CAAqCC,KAArC,CAA2C,IAA3C;AACAM,SAAO,OAAP,EAAgB,CAAC,IAAD,EAAO,IAAP,CAAhB,EAA8BP,MAA9B,CAAqCC,KAArC,CAA2C,IAA3C;AACAM,SAAO,CAAC,OAAD,EAAU,OAAV,CAAP,EAA2B,CAAC,IAAD,EAAO,IAAP,CAA3B,EAAyCP,MAAzC,CAAgDC,KAAhD,CAAsD,IAAtD;AACAM,SAAO,CAAC,OAAD,EAAU,OAAV,CAAP,EAA2B,CAAC,IAAD,EAAO,IAAP,CAA3B,EAAyCP,MAAzC,CAAgDC,KAAhD,CAAsD,IAAtD;AACAM,SAAO,CAAC,OAAD,EAAU,OAAV,CAAP,EAA2B,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAA3B,EAA+CP,MAA/C,CAAsDC,KAAtD,CAA4D,IAA5D;AACAM,SAAO,OAAP,EAAgB,CAAC,IAAD,EAAO,OAAP,CAAhB,EAAiCP,MAAjC,CAAwCC,KAAxC,CAA8C,OAA9C;;AAEA,MAAMU,UAAU,SAAVA,OAAU;AAAA,UAAMJ,OAAO,OAAP,EAAgB,CAAC,IAAD,EAAO,IAAP,CAAhB,CAAN;AAAA,GAAhB;AACAI,UAAQX,MAAR,CAAeY,KAAf,CAAqB,kEAArB;AACA,EAlCD;AAmCA,CA5CD","file":"locale.test.js","sourcesContent":["import choose_locale, { intlDateTimeFormatSupportedLocale } from '../source/locale'\r\n\r\ndescribe('locale', function()\r\n{\r\n\tit(`should tell if can use Intl for date formatting`, function()\r\n\t{\r\n\t\tintlDateTimeFormatSupportedLocale('en').should.equal('en')\r\n\t\tintlDateTimeFormatSupportedLocale('en-XX').should.equal('en-XX')\r\n\t\tintlDateTimeFormatSupportedLocale(['en', 'ru']).should.equal('en')\r\n\t})\r\n\r\n\tit(`should choose the most appropriate locale`, function()\r\n\t{\r\n\t\tfunction array_to_object(array)\r\n\t\t{\r\n\t\t\treturn array.reduce((object, locale) =>\r\n\t\t\t{\r\n\t\t\t\tobject[locale] = true\r\n\t\t\t\treturn object\r\n\t\t\t},\r\n\t\t\t{})\r\n\t\t}\r\n\r\n\t\tfunction choose(locale, locales, default_locale = 'en')\r\n\t\t{\r\n\t\t\tif (typeof locale === 'string')\r\n\t\t\t{\r\n\t\t\t\tlocale = [locale]\r\n\t\t\t}\r\n\r\n\t\t\tlocale = locale.concat(default_locale)\r\n\r\n\t\t\treturn choose_locale(locale, array_to_object(locales))\r\n\t\t}\r\n\r\n\t\tchoose('ru-RU', ['en', 'ru']).should.equal('ru')\r\n\t\tchoose('en-GB', ['en', 'ru']).should.equal('en')\r\n\t\tchoose('fr-FR', ['en', 'ru']).should.equal('en')\r\n\t\tchoose(['fr-FR', 'de-DE'], ['en', 'ru']).should.equal('en')\r\n\t\tchoose(['fr-FR', 'de-DE'], ['en', 'de']).should.equal('de')\r\n\t\tchoose(['fr-FR', 'de-DE'], ['en', 'de', 'fr']).should.equal('fr')\r\n\t\tchoose('fr-FR', ['en', 'fr-FR']).should.equal('fr-FR')\r\n\r\n\t\tconst thrower = () => choose('fr-FR', ['de', 'ru'])\r\n\t\tthrower.should.throw('No locale data has been registered for any of the locales: fr-FR')\r\n\t})\r\n})"]}